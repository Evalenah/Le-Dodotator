<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dodos</title>
<style>
body{
  margin:0; min-height:100vh;
  display:grid; place-items:center;
  font-family: system-ui, sans-serif;
  background:#ffffff;
}
.card{
  width:min(600px,90%);
  border:2px solid #000;
  border-radius:20px;
  padding:24px;
  box-shadow:6px 6px 0 #000;
}
h1{ margin:0 0 10px; font-size:20px;}
.big{
  font-size:clamp(48px,8vw,72px);
  font-weight:900;
  margin:10px 0;
}
.sub{ font-size:14px; opacity:.8;}
.line{
  margin-top:16px;
  display:flex; gap:10px; flex-wrap:wrap;
}
input,button{
  font:inherit;
  padding:10px 12px;
  border-radius:14px;
  border:2px solid #000;
  background:#fff;
}
button{ cursor:pointer; box-shadow:3px 3px 0 #000;}
button:active{ transform:translate(1px,1px); box-shadow:2px 2px 0 #000;}
.mono{
  font-family:monospace;
  font-size:16px;
  border:2px dashed #000;
  border-radius:12px;
  padding:8px 10px;
  display:inline-block;
  margin-top:6px;
}
</style>
</head>
<body>
<div class="card">
  <h1>ðŸ§¸ Compte Ã  rebours en dodos</h1>

  <div class="big"><span id="dodos">â€”</span> dodos</div>
  <div class="mono" id="hms">â€”</div>

  <div class="line">
    <input type="date" id="date"/>
    <input type="time" id="time" step="1" value="00:00:00"/>
    <button onclick="saveDate()">Enregistrer</button>
    <button onclick="resetDate()">RÃ©initialiser</button>
  </div>
</div>

<script>
function pad(n){return String(n).padStart(2,"0");}

function getTarget(){
  const saved = localStorage.getItem("dodoTarget");
  if(!saved) return null;
  return new Date(saved);
}

function saveDate(){
  const d = document.getElementById("date").value;
  const t = document.getElementById("time").value || "00:00:00";
  if(!d) return;
  const target = new Date(d + "T" + t);
  localStorage.setItem("dodoTarget", target.toISOString());
  tick();
}

function resetDate(){
  localStorage.removeItem("dodoTarget");
  document.getElementById("dodos").textContent = "â€”";
  document.getElementById("hms").textContent = "â€”";
}

function tick(){
  const target = getTarget();
  if(!target){
    document.getElementById("dodos").textContent="â€”";
    document.getElementById("hms").textContent="choisis une date";
    return;
  }

  const now = new Date();
  const ms = target - now;

  const dodos = ms / 86400000; // 24h exact
  document.getElementById("dodos").textContent =
    dodos > 0 ? dodos.toFixed(2) : "0.00";

  const totalSec = Math.floor(Math.abs(ms)/1000);
  const s = totalSec % 60;
  const m = Math.floor(totalSec/60) % 60;
  const h = Math.floor(totalSec/3600) % 24;
  const days = Math.floor(totalSec/86400);

  if(ms >= 0){
    document.getElementById("hms").textContent =
      days+"j "+pad(h)+":"+pad(m)+":"+pad(s);
  }else{
    document.getElementById("hms").textContent =
      "Ã©vÃ©nement passÃ©";
  }
}

setInterval(tick,1000);
tick();
</script>
</body>
</html>
